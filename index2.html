<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>–ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å ‚Äî –ì—Ä—É–ø–ø–∞ 13</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: center;
      background: linear-gradient(270deg, #ff7eb3, #65d6ce, #8ec5fc, #e0c3fc);
      background-size: 800% 800%;
      animation: gradientMove 15s ease infinite;
    }
    @keyframes gradientMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    h1 {
      text-align: center;
      color: white;
      text-shadow: 0 0 8px rgba(0,0,0,0.6);
      margin-bottom: 10px;
    }
    .student-list {
      max-width: 650px;
      width: 100%;
      background: rgba(255, 255, 255, 0.95);
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(0,0,0,0.25);
      margin-bottom: 10px;
    }
    .student {
      display: flex;
      justify-content: space-between;
      padding: 8px;
      border-bottom: 1px solid #eee;
      align-items: center;
    }
    .student:last-child { border-bottom: none; }
    button {
      margin: 8px;
      padding: 10px 16px;
      font-size: 15px;
      border: none;
      background: #4CAF50;
      color: white;
      border-radius: 6px;
      cursor: pointer;
      transition: 0.18s;
      box-shadow: 0 4px 10px rgba(0,0,0,0.12);
    }
    button.secondary { background: #1976d2; }
    button.ghost { background: #777; }
    button:hover { transform: translateY(-2px); }
    #result {
      max-width: 650px;
      background: white;
      color: black;
      padding: 18px;
      border-radius: 12px;
      margin-top: 12px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.15);
      text-align: left;
    }
    .present { color: #009900; font-weight: 600; }
    .absent { color: #cc0000; font-weight: 600; }
    .motivation { margin-top: 12px; padding: 10px; font-style: italic; color: #444; text-align:center; }
    ul.report { padding-left: 18px; margin: 10px 0; }
    ul.report li { margin: 6px 0; }
    .controls { text-align:center; margin-bottom: 6px; }
  </style>
</head>
<body>
  <h1>–ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å ‚Äî –ì—Ä—É–ø–ø–∞ 13</h1>

  <div class="student-list" id="list">
    <div class="student"><span>1. –ê–¥—ã–ª–æ–≤ –ê–±–±–æ—Å–±–µ–∫   –°–∞–Ω–∂–∞—Ä–æ–≤–∏—á</span><input type="checkbox" class="check"></div>
    <div class="student"><span>2. –ê—Å–∞–¥—É–ª–æ–µ–≤ –ù—É—Ä—Å—É–ª—Ç–∞–Ω –ö—É–≤–∞–Ω–¥–∏–∫–æ–≤–∏—á</span><input type="checkbox" class="check"></div>
    <div class="student"><span>3. –ê—Å–∞–Ω–±–µ–∫–æ–≤–∞ –ê–ª—Å—É –ñ—ã—Ä–≥–∞–ª–±–µ–∫–æ–≤–Ω–∞</span><input type="checkbox" class="check"></div>
    <div class="student"><span>4. –ì—É–ª–∞–º–æ–≤–∞ –ê–π–Ω–∞–∑–∏—Ä</span><input type="checkbox" class="check"></div>
    <div class="student"><span>5. –ò–Ω–∞–º–æ–≤–∞ –ó—É—Ö—Ä–∞—Ö–æ–Ω –î–∏–ª—à–∞–¥–æ–≤–Ω–∞</span><input type="checkbox" class="check"></div>
    <div class="student"><span>6. –ö–∞–∏–º–æ–≤–∞ –ê—Å–µ–º–∞ –ë–µ–∫—Ç—É—Ä—Å—É–Ω–æ–≤–Ω–∞</span><input type="checkbox" class="check"></div>
    <div class="student"><span>7. –ö–∞—Ä–∞–±–∞–µ–≤ –î–∞–Ω–∏—è—Ä –®–µ—Ä–º–∞–º–∞—Ç–æ–≤–∏—á</span><input type="checkbox" class="check"></div>
    <div class="student"><span>8. –ö—É—Ä–≤–∞–Ω–∞–ª–∏–µ–≤ –ê—Å–æ–¥–±–µ–∫ –£–ª—É–≥–±–µ–∫–æ–≤–∏—á</span><input type="checkbox" class="check"></div>
    <div class="student"><span>9. –ú–∞–¥–∞–º–∏–Ω–æ–≤ –•–∞—Å–∞–Ω–±–æ–π –£–º–∞—Ä–∂–æ–Ω–≤–∏—á</span><input type="checkbox" class="check"></div>
    <div class="student"><span>10. –ú—É–ª–ª–∞–µ–≤–∞ –°–µ–≤–∏–Ω—á—Ö–æ–Ω –ú–∞—Ö–º—É–¥–∂–æ–Ω–æ–≤–Ω–∞</span><input type="checkbox" class="check"></div>
    <div class="student"><span>11. –û–º–∞—Ä–æ–≤–∞ –≠–ª–Ω–∞—Ä–∞ –®—É—Ö—Ä–∞—Ç–æ–≤–Ω–∞</span><input type="checkbox" class="check"></div>
    <div class="student"><span>12. –¢–∏–ª–∞–±–∞–µ–≤ –û–∑–æ–¥–±–µ–∫ –ú—É—Ö–∏–¥–¥–∏–Ω–æ–≤–∏—á</span><input type="checkbox" class="check"></div>
    <div class="student"><span>13. –¢–æ–π—á—É–±–æ–µ–≤ –ú—É—Ö–∞–º–º–∞–¥–∑–æ—Ö–∏–¥ –ú–∞—Ö–∞–º–∞—Ç–∞–∑–∏–∑–æ–≤–∏—á</span><input type="checkbox" class="check"></div>
    <div class="student"><span>14. –£–º–∞—Ä–æ–≤–∞ –°–µ–≤–∏–Ω—á –ë–∞–∫—Ç–∏–π–æ—Ä –∫–∏–∑–∏</span><input type="checkbox" class="check"></div>
    <div class="student"><span>15. –•–∞–∫–∏–º–æ–≤ –ê–∫—Ä–∞–º–∂–æ–Ω –ê–∑–∞–º–∂–æ–Ω–æ–≤–∏—á</span><input type="checkbox" class="check"></div>
  </div>

  <div class="controls">
    <button onclick="showResult()">–ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç</button>
    <button class="secondary" onclick="downloadReport()">–°–∫–∞—á–∞—Ç—å –æ—Ç—á—ë—Ç</button>
    <button class="ghost" onclick="clearMarks()">–û—á–∏—Å—Ç–∏—Ç—å –æ—Ç–º–µ—Ç–∫–∏</button>
    <button onclick="sendWhatsApp()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å WhatsApp</button>
    <button onclick="sendTelegram()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å Telegram</button>
    <button class="secondary" onclick="copyReport()">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä</button>
  </div>

  <div id="result"></div>

  <script>
    // helper: –ø–æ–ª—É—á–∏—Ç—å —á–µ–∫–±–æ–∫—Å—ã (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏)
    function getChecks() { return document.querySelectorAll(".check"); }

    // init: –∑–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –æ—Ç–º–µ—Ç–æ–∫ –∏ –Ω–∞–≤–µ—à–∏–≤–∞–Ω–∏–µ —Å–ª—É—à–∞—Ç–µ–ª–µ–π
    window.addEventListener("load", () => {
      const checks = getChecks();
      checks.forEach((c, i) => {
        const saved = localStorage.getItem("student_" + i);
        c.checked = (saved === "true");
        c.addEventListener("change", () => {
          localStorage.setItem("student_" + i, c.checked);
        });
      });
    });

    // –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–∫–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö/–æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö
    function getPresentAbsent() {
      const checks = getChecks();
      const present = [], absent = [];
      checks.forEach((c) => {
        const name = c.parentElement.querySelector("span").innerText.trim();
        if (c.checked) present.push(name); else absent.push(name);
      });
      return { present, absent };
    }

    // —Ç–µ–∫—Å—Ç –æ—Ç—á—ë—Ç–∞ (–¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏/—Å–∫–∞—á–∏–≤–∞–Ω–∏—è)
    function generateReportText() {
      const { present, absent } = getPresentAbsent();
      return `üìã –û—Ç—á—ë—Ç –ø–æ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ ‚Äî –ì—Ä—É–ø–ø–∞ 13
–î–∞—Ç–∞: ${new Date().toLocaleDateString()}

‚úÖ –ü—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç:
${present.length ? present.join("\n") : "–Ω–∏–∫–æ–≥–æ –Ω–µ—Ç"}

‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç:
${absent.length ? absent.join("\n") : "–≤—Å–µ –Ω–∞ –º–µ—Å—Ç–µ"}
`;
    }

    // –ø–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –∫–∞—Ä—Ç–æ—á–∫–µ (–±–µ–∑ –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å—Ç—Ä–æ–∫)
    function showResult() {
      const { present, absent } = getPresentAbsent();
      let html = "<h2>–†–µ–∑—É–ª—å—Ç–∞—Ç:</h2><ul class='report'>";
      present.forEach(n => html += `<li class="present">‚úÖ ${n}</li>`);
      absent.forEach(n => html += `<li class="absent">‚ùå ${n}</li>`);
      html += "</ul>";
      const phrases = [
        "üöÄ –ì—Ä—É–ø–ø–∞ 13 –≤—Å–µ–≥–¥–∞ –Ω–∞ –≤—ã—Å–æ—Ç–µ!",
        "üî• –ú–æ–ª–æ–¥—Ü—ã, –¥–µ—Ä–∂–∏–º —Ç–µ–º–ø!",
        "üòé –ù–∏–∫—Ç–æ –Ω–∞—Å –Ω–µ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç!",
        "‚ú® –°–µ–≥–æ–¥–Ω—è –æ—Ç–ª–∏—á–Ω—ã–π –¥–µ–Ω—å –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–±–µ–¥!",
        "üí™ –ì—Ä—É–ø–ø–∞ 13 ‚Äî —Å–∏–ª–∞!"
      ];
      html += `<div class="motivation">${phrases[Math.floor(Math.random() * phrases.length)]}</div>`;
      document.getElementById("result").innerHTML = html;
    }

    // —Å–∫–∞—á–∞—Ç—å –æ—Ç—á—ë—Ç (—Ñ–∞–π–ª —Å –¥–∞—Ç–æ–π)
    function downloadReport() {
      const text = generateReportText();
      const filename = `otchet_gr13_${new Date().toISOString().slice(0,10)}.txt`;
      const blob = new Blob([text], { type: "text/plain" });
      const a = document.createElement("a");
      a.href = URL.createObjectURL(blob);
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      a.remove();
    }

    // –æ—á–∏—Å—Ç–∏—Ç—å –æ—Ç–º–µ—Ç–∫–∏
    function clearMarks() {
      const checks = getChecks();
      checks.forEach((c, i) => {
        c.checked = false;
        localStorage.removeItem("student_" + i);
      });
      document.getElementById("result").innerHTML = "";
    }

    // –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –±—É—Ñ–µ—Ä (—Ä–µ–∑–µ—Ä–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –µ—Å–ª–∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∞)
    async function copyReport() {
      const text = generateReportText();
      if (navigator.clipboard && navigator.clipboard.writeText) {
        try {
          await navigator.clipboard.writeText(text);
          alert("–¢–µ–∫—Å—Ç –æ—Ç—á—ë—Ç–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞. –í—Å—Ç–∞–≤—å—Ç–µ –≤ WhatsApp/Telegram.");
          return;
        } catch(e) { /* fallback –¥–∞–ª–µ–µ */ }
      }
      // fallback for older browsers
      const ta = document.createElement("textarea");
      ta.value = text;
      document.body.appendChild(ta);
      ta.select();
      document.execCommand("copy");
      ta.remove();
      alert("–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω (fallback). –í—Å—Ç–∞–≤—å—Ç–µ –≤ —Å–æ–æ–±—â–µ–Ω–∏–µ.");
    }

    // –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ WhatsApp (Web Share API -> wa.me -> api.whatsapp.com)
    async function sendWhatsApp() {
      const text = generateReportText();
      // If Web Share API available (mobile)
      if (navigator.share) {
        try {
          await navigator.share({ text });
          return;
        } catch (err) { /* continue to open link */ }
      }
      const encoded = encodeURIComponent(text);
      const url1 = `https://wa.me/?text=${encoded}`;
      const url2 = `https://api.whatsapp.com/send?text=${encoded}`;
      let opened = window.open(url1, "_blank");
      if (!opened) {
        // fallback to api.whatsapp
        const a = document.createElement("a");
        a.href = url2;
        a.target = "_blank";
        a.rel = "noopener";
        document.body.appendChild(a);
        a.click();
        a.remove();
      }
    }

    // –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram (Web Share API -> t.me/share/url)
    function sendTelegram() {
      const text = generateReportText();
      if (navigator.share) {
        try { navigator.share({ text }); return; } catch(e) { /* continue */ }
      }
      const encoded = encodeURIComponent(text);
      const url = `https://t.me/share/url?url=&text=${encoded}`;
      let opened = window.open(url, "_blank");
      if (!opened) {
        const a = document.createElement("a");
        a.href = url;
        a.target = "_blank";
        a.rel = "noopener";
        document.body.appendChild(a);
        a.click();
        a.remove();
      }
    }
  </script>
</body>
</html>
